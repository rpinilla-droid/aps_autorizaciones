<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARS Servicios de Salud - Autorizaciones</title>
    <!-- Carga de Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Font Awesome para √≠conos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* Configuraci√≥n base de la fuente */
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --card-bg: #ffffff;
            --border-color: #dee2e6;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
        }

        /* Estilos estructurales para el login y el cuerpo principal */
        .login-body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f8f9fa; /* bg-gray-100 */
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 500;
            color: var(--secondary-color);
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
        }

        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            font-weight: 700;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Estilos para la tabla de servicios y el contenedor responsive */
        .services-table-container {
            overflow-x: auto;
        }
        
        .services-table-container table {
            min-width: 800px;
        }
        
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10;
        }

        /* Ajuste de padding inferior para no ocultar contenido bajo el status bar */
        main {
            padding-bottom: 60px; /* Suficiente espacio para el status bar */
        }
        
        /* Ocultar las vistas iniciales */
        #main-app-view {
            display: none;
        }

    </style>
</head>
<body class="bg-gray-100">

    <!-- ---------------------------------------------------- -->
    <!-- -------------- VISTA DE INICIO DE SESI√ìN ----------- -->
    <!-- ---------------------------------------------------- -->
    <div id="login-view" class="login-body">
        <div class="w-full max-w-md p-6">
            <div class="bg-white p-8 rounded-xl shadow-xl text-center">
                <h1 class="text-3xl font-bold text-blue-600 mb-1">ARS Salud</h1>
                <p class="text-gray-500 mb-6">M√≥dulo de Servicios y Autorizaciones</p>
                
                <form id="login-form">
                    <div class="mb-4 text-left">
                        <label for="username" class="block text-sm font-semibold text-gray-700 mb-1">Usuario (Rol)</label>
                        <input type="text" id="username" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="Ej: auditor, caja, reembolso" required>
                    </div>
                    <div class="mb-6 text-left">
                        <label for="password" class="block text-sm font-semibold text-gray-700 mb-1">Contrase√±a</label>
                        <input type="password" id="password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white font-bold py-2.5 rounded-lg hover:bg-blue-700 transition duration-200 shadow-md">
                        <i class="fas fa-sign-in-alt mr-2"></i> Iniciar Sesi√≥n
                    </button>
                </form>

                <div id="login-message" class="hidden mt-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm" role="alert"></div>

                <div class="mt-4 text-sm">
                    <a href="#" class="text-blue-600 hover:text-blue-700">¬øOlvid√≥ su contrase√±a?</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ---------------------------------------------------- -->
    <!-- ---------------- VISTA DE APLICACI√ìN PRINCIPAL ----- -->
    <!-- ---------------------------------------------------- -->
    <div id="main-app-view">
        <header class="bg-blue-600 text-white shadow-md">
            <div class="container mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center">
                <h1 class="text-xl md:text-2xl font-bold mb-2 md:mb-0">M√≥dulo de Servicios de Salud</h1>
                
                <div class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4">
                    <div class="flex items-center space-x-2">
                        <label for="auth-type-selector" class="text-sm font-semibold">Tipo de Autorizaci√≥n:</label>
                        <select id="auth-type-selector" class="bg-white bg-opacity-20 text-white px-3 py-1.5 rounded-lg border border-white border-opacity-30 font-semibold cursor-pointer">
                            <!-- Opciones cargadas por JS -->
                        </select>
                    </div>
                    <button id="logout-btn" class="bg-white text-blue-600 hover:bg-gray-100 font-bold px-3 py-1.5 rounded-lg text-sm shadow-md transition duration-150">
                        <i class="fas fa-sign-out-alt mr-1"></i> Salir
                    </button>
                </div>
            </div>
        </header>

        <main class="container mx-auto px-4 py-5">
            <!-- Barra de Herramientas Principal (Acciones) -->
            <nav class="bg-white p-4 rounded-lg shadow-lg mb-6 flex flex-wrap gap-3">
                <!-- Eliminadas referencias a las teclas F# -->
                <button id="adicionar-btn" class="flex items-center bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition"><i class="fas fa-plus mr-2"></i> Adicionar</button>
                <button id="modificar-btn" class="flex items-center bg-gray-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition"><i class="fas fa-edit mr-2"></i> Modificar</button>
                <button id="anular-btn" class="flex items-center bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition"><i class="fas fa-times mr-2"></i> Anular</button>
                <button class="flex items-center bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 transition"><i class="fas fa-save mr-2"></i> Guardar</button>
                <button class="flex items-center bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition"><i class="fas fa-print mr-2"></i> Imprimir</button>
                <button id="casos-btn" class="flex items-center bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-700 transition"><i class="fas fa-folder-open mr-2"></i> Casos</button>
                <button id="excepcion-btn" class="flex items-center bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-700 transition"><i class="fas fa-certificate mr-2"></i> Excepci√≥n</button>
            </nav>
            
            <!-- Formulario de Autorizaci√≥n -->
            <section class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <h2 class="text-xl font-bold mb-4 text-gray-700">Datos de la Autorizaci√≥n</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    
                    <!-- Campos principales -->
                    <div class="space-y-4">
                        <label for="autorizacion-num" class="block text-sm font-semibold">Autorizaci√≥n #</label>
                        <input type="text" id="autorizacion-num" value="[Generado Auto]" disabled class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100">
                    </div>
                    <div class="space-y-4">
                        <label for="prestador" class="block text-sm font-semibold">Prestador</label>
                        <input type="text" id="prestador" placeholder="Seleccione Prestador" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="space-y-4">
                        <label for="solicita" class="block text-sm font-semibold">Solicitado por</label>
                        <input type="text" id="solicita" placeholder="Nombre" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    
                    <!-- Campos Afiliado / Tel√©fono / Tipo Servicio -->
                    <div class="space-y-4">
                        <label for="afiliado" class="block text-sm font-semibold">Afiliado</label>
                        <input type="text" id="afiliado" placeholder="ID/P√≥liza" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="space-y-4">
                        <label for="telefono" class="block text-sm font-semibold">Tel√©fono</label>
                        <input type="tel" id="telefono" placeholder="N√∫mero de contacto" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="space-y-4">
                        <label for="tipo-servicio" class="block text-sm font-semibold">Tipo Servicio</label>
                        <select id="tipo-servicio" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option>Ambulatorio</option>
                            <option>Internamiento</option>
                            <option>Prevenci√≥n</option>
                        </select>
                    </div>

                    <!-- Campos Origen / Tipo Atenci√≥n / Tipo Riesgo -->
                    <div class="space-y-4">
                        <label for="origen" class="block text-sm font-semibold">Origen Servicio</label>
                        <input type="text" id="origen" placeholder="C√≥digo" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="space-y-4">
                        <label for="tipo-atencion" class="block text-sm font-semibold">Tipo Atenci√≥n</label>
                        <select id="tipo-atencion" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option>Programada</option>
                            <option>Emergencia</option>
                        </select>
                    </div>
                    <div class="space-y-4">
                        <label for="tipo-riesgo" class="block text-sm font-semibold">Tipo Riesgo</label>
                        <input type="text" id="tipo-riesgo" placeholder="Seguro de Cobertura" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    
                    <!-- Campos de Fecha y Dx. -->
                    <div class="space-y-4">
                        <label for="apertura" class="block text-sm font-semibold">Fecha Apertura</label>
                        <input type="date" id="apertura" value="2025-12-01" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="space-y-4">
                        <label for="cierre" class="block text-sm font-semibold">Fecha Cierre</label>
                        <input type="date" id="cierre" placeholder="Auto-cierre para ambulatorio" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="space-y-4">
                        <label for="dx-presuntivo" class="block text-sm font-semibold">Dx. Presuntivo (CIE-10)</label>
                        <input type="text" id="dx-presuntivo" placeholder="Buscar Diagn√≥stico" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                </div>
            </section>

            <!-- Pesta√±as de Detalle y Alertas -->
            <section class="bg-white p-6 rounded-lg shadow-lg mb-6">
                <div class="flex border-b-2 border-gray-200 mb-4 flex-wrap gap-2" id="tab-header">
                    <button class="tab-btn active" data-tab="servicios">Servicios</button>
                    <button class="tab-btn" data-tab="diagnosticos">Diagn√≥sticos</button>
                    <button class="tab-btn" data-tab="restricciones">Restricciones/Alertas</button>
                    <button class="tab-btn" data-tab="afiliado">Datos Afiliado</button>
                </div>
                
                <div id="servicios" class="tab-content active">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">Detalle de Servicios</h3>
                    <div class="services-table-container border rounded-lg">
                        <table class="w-full text-sm">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="p-3 border-b text-left">Rengl√≥n</th>
                                    <th class="p-3 border-b text-left">Descripci√≥n del Servicio</th>
                                    <th class="p-3 border-b text-left">Cant.</th>
                                    <th class="p-3 border-b text-left">Precio</th>
                                    <th class="p-3 border-b text-left">Total</th>
                                    <th class="p-3 border-b text-left">% Cobertura</th>
                                    <th class="p-3 border-b text-left">Copago</th>
                                    <th class="p-3 border-b text-left">Fecha Servicio</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-gray-50">
                                    <td class="p-3 border-b"><input type="text" value="G-100" class="w-full"></td>
                                    <td class="p-3 border-b"><input type="text" value="Consulta de Medicina General" class="w-full"></td>
                                    <td class="p-3 border-b"><input type="number" value="1" class="w-full text-right"></td>
                                    <td class="p-3 border-b text-right">1500.00</td>
                                    <td class="p-3 border-b text-right font-medium">1500.00</td>
                                    <td class="p-3 border-b"><input type="number" value="80" class="w-full text-right"></td>
                                    <td class="p-3 border-b text-right font-medium text-red-600">300.00</td>
                                    <td class="p-3 border-b"><input type="date" value="2025-12-01" class="w-full"></td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="p-3 border-b"><input type="text" value="S-205" class="w-full"></td>
                                    <td class="p-3 border-b"><input type="text" value="Laboratorio B√°sico" class="w-full"></td>
                                    <td class="p-3 border-b"><input type="number" value="1" class="w-full text-right"></td>
                                    <td class="p-3 border-b text-right">500.00</td>
                                    <td class="p-3 border-b text-right font-medium">500.00</td>
                                    <td class="p-3 border-b"><input type="number" value="100" class="w-full text-right"></td>
                                    <td class="p-3 border-b text-right font-medium text-red-600">0.00</td>
                                    <td class="p-3 border-b"><input type="date" value="2025-12-01" class="w-full"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="flex justify-end mt-3">
                        <button class="bg-blue-100 text-blue-600 font-semibold py-1.5 px-3 rounded-lg hover:bg-blue-200 text-xs"><i class="fas fa-plus mr-1"></i> A√±adir Servicio</button>
                    </div>
                    <div class="totals flex justify-end gap-6 mt-4 pt-4 border-t border-gray-200 text-lg font-bold">
                        <span class="text-gray-600">Total Cobertura: <span class="text-green-600">7,200.00</span></span>
                        <span class="text-gray-600">Total Copago: <span class="text-red-600">800.00</span></span>
                    </div>
                </div>
                
                <div id="diagnosticos" class="tab-content">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">Diagn√≥sticos Secundarios y Condiciones</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="space-y-4">
                            <label for="dx-sec1" class="block text-sm font-semibold">Dx. Secundario I (CIE-10)</label>
                            <input type="text" id="dx-sec1" placeholder="Diagn√≥stico secundario" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div class="space-y-4">
                            <label for="dx-sec2" class="block text-sm font-semibold">Dx. Secundario II (CIE-10)</label>
                            <input type="text" id="dx-sec2" placeholder="Diagn√≥stico secundario" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div class="space-y-4">
                            <label for="complicacion" class="block text-sm font-semibold">Complicaci√≥n (CIE-10)</label>
                            <input type="text" id="complicacion" placeholder="Diagn√≥stico de complicaci√≥n" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                </div>

                <div id="restricciones" class="tab-content">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">üì¢ Controles y Alertas Aplicadas</h3>
                    <div class="flex flex-col gap-4">
                        
                        <!-- Alerta por Afiliado/Servicio/Grupos -->
                        <div class="p-4 rounded-lg flex items-start space-x-3 bg-yellow-100 text-yellow-800 border border-yellow-300">
                            <i class="fas fa-exclamation-triangle mt-1"></i>
                            <div>
                                <span class="font-bold">Alerta por Afiliado:</span> L√≠mite de 3 consultas de especialidad alcanzado para el mes.
                            </div>
                        </div>
                        
                        <!-- Restricci√≥n con Opci√≥n de Excepci√≥n -->
                        <div class="p-4 rounded-lg flex items-start space-x-3 bg-red-100 text-red-800 border border-red-300 justify-between flex-wrap gap-2">
                            <div class="flex items-start space-x-3">
                                <i class="fas fa-ban mt-1"></i>
                                <div>
                                    <span class="font-bold">Restricci√≥n por Servicio:</span> El servicio "Ecograf√≠a 3D" no est√° cubierto por el plan b√°sico del afiliado.
                                </div>
                            </div>
                            <button class="bg-gray-500 text-white font-semibold py-1.5 px-3 rounded-lg hover:bg-gray-600 text-xs self-center">Crear Excepci√≥n</button>
                        </div>
                        
                        <!-- Notificaci√≥n de Auditor√≠a -->
                        <div class="p-4 rounded-lg flex items-start space-x-3 bg-blue-100 text-blue-800 border border-blue-300">
                            <i class="fas fa-notes-medical mt-1"></i>
                            <div>
                                <span class="font-bold">Auditor√≠a Concurrente:</span> Esta autorizaci√≥n ha activado el m√≥dulo de auditor√≠a concurrente.
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="afiliado" class="tab-content">
                    <h3 class="text-lg font-semibold mb-3 text-gray-700">Datos Generales del Afiliado y Planes</h3>
                    <p class="text-gray-600">Aqu√≠ se informa de los datos generales del afiliado en cuesti√≥n, as√≠ como la descripci√≥n y los periodos de vigencia de los planes contratados por el afiliado (B√°sico, Voluntario, Colectivo, etc.).</p>
                </div>

            </section>
        </main>
        
        <!-- Barra de Estatus (Fixed Footer) -->
        <footer class="status-bar bg-gray-800 text-white p-3 shadow-2xl flex justify-start items-center flex-wrap gap-5 text-sm">
            <span>Estatus: <span id="status-text" class="font-bold text-green-400">Consultando</span></span>
            <span>Usuario: <span id="status-user" class="font-bold"></span></span>
            <button class="flex items-center text-gray-300 hover:text-yellow-400 transition" title="Ver Modificaciones"><i class="fas fa-exchange-alt mr-1"></i> Modificaciones: 2</button>
            <button class="flex items-center text-gray-300 hover:text-yellow-400 transition" title="Ver Notas"><i class="fas fa-comment-dots mr-1"></i> Notas: 1</button>
            <button class="flex items-center text-gray-300 hover:text-yellow-400 transition" title="Ver Digitalizaciones"><i class="fas fa-file-alt mr-1"></i> Digitalizaciones: 3</button>
        </footer>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Configuraci√≥n de Roles ---
            const roles = {
                auditor: ['telefonia', 'precertificacion', 'reembolso', 'reclamo', 'ivr', 'webservice', 'importadas'],
                caja: ['telefonia', 'precertificacion'],
                reembolso: ['reembolso'],
            };

            // Mapeo de tipos de autorizaci√≥n para el selector
            const optionsMap = {
                'telefonia': 'Autorizaciones Telef√≥nicas',
                'precertificacion': 'Autorizaciones Pre-Certificadas',
                'reembolso': 'Autorizaciones de Reembolsos',
                'reclamo': 'Autorizaciones Reclamos No Autorizados',
                'ivr': 'Autorizaciones IVR (Solo Modificar)',
                'webservice': 'Autorizaciones Web Service (Solo Modificar)',
                'importadas': 'Autorizaciones Importadas (Solo Modificar)'
            };

            // Elementos de la vista
            const loginView = document.getElementById('login-view');
            const mainAppView = document.getElementById('main-app-view');
            const loginForm = document.getElementById('login-form');

            // --- Control de Vistas ---
            const loggedInUser = localStorage.getItem('loggedInUser');
            if (loggedInUser) {
                loginView.style.display = 'none';
                mainAppView.style.display = 'block';
                initializeApp();
            } else {
                loginView.style.display = 'flex';
                mainAppView.style.display = 'none';
            }

            // --- L√≥gica de Login ---
            if (loginForm) {
                loginForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const username = document.getElementById('username').value.toLowerCase();
                    const password = document.getElementById('password').value;
                    const loginMessage = document.getElementById('login-message');
                    
                    if (password === '1234' && roles[username]) {
                        localStorage.setItem('userPermissions', JSON.stringify(roles[username]));
                        localStorage.setItem('loggedInUser', username.toUpperCase()); 
                        
                        // Transici√≥n a la vista principal
                        loginView.style.display = 'none';
                        mainAppView.style.display = 'block';
                        initializeApp();
                    } else {
                        loginMessage.textContent = 'Credenciales o rol no v√°lidos. Pruebe con "auditor", "caja", o "reembolso" y contrase√±a 1234.';
                        loginMessage.classList.remove('hidden');
                    }
                });
            }

            // --- L√≥gica de la Aplicaci√≥n Principal ---
            function initializeApp() {
                const userPermissions = JSON.parse(localStorage.getItem('userPermissions') || '[]');
                const loggedInUser = localStorage.getItem('loggedInUser');
                const authTypeSelector = document.getElementById('auth-type-selector');
                const statusUser = document.getElementById('status-user');
                
                statusUser.textContent = loggedInUser; 

                // Funci√≥n para cargar las opciones de Autorizaci√≥n seg√∫n el rol
                function loadAuthorizationOptions() {
                    authTypeSelector.innerHTML = ''; 
                    
                    userPermissions.forEach(permission => {
                        const option = document.createElement('option');
                        option.value = permission;
                        option.textContent = optionsMap[permission] || permission;
                        authTypeSelector.appendChild(option);
                    });
                }
                
                // Control de acceso por tipo de autorizaci√≥n seleccionada
                function updatePermissionsForType(selectedType) {
                    const isReadWrite = ['telefonia', 'precertificacion', 'reembolso', 'reclamo'].includes(selectedType);
                    const isReadOnly = ['ivr', 'webservice', 'importadas'].includes(selectedType);

                    // Botones de acci√≥n
                    document.getElementById('adicionar-btn').disabled = !isReadWrite;
                    document.getElementById('modificar-btn').disabled = !isReadWrite && !isReadOnly; 
                    document.getElementById('anular-btn').disabled = isReadOnly; 
                    document.getElementById('casos-btn').disabled = !isReadWrite;
                    document.getElementById('excepcion-btn').disabled = !isReadWrite;
                    
                    // Actualizar el estado en el footer
                    const statusText = document.getElementById('status-text');
                    if (isReadWrite) {
                        statusText.textContent = 'Modo Escritura/Lectura';
                        statusText.classList.remove('text-red-400');
                        statusText.classList.add('text-green-400');
                    } else if (isReadOnly) {
                         statusText.textContent = 'Modo Solo Modificaci√≥n';
                         statusText.classList.remove('text-green-400');
                         statusText.classList.add('text-red-400');
                    } else {
                         statusText.textContent = 'Modo Consulta';
                         statusText.classList.remove('text-green-400', 'text-red-400');
                    }
                }

                loadAuthorizationOptions();
                
                // Inicializar permisos en el tipo de autorizaci√≥n por defecto
                if (authTypeSelector.options.length > 0) {
                    updatePermissionsForType(authTypeSelector.value); 
                }

                authTypeSelector.addEventListener('change', (e) => {
                    updatePermissionsForType(e.target.value);
                    alert(`Cambiando a: ${optionsMap[e.target.value] || e.target.value}. Se han ajustado los permisos de los botones.`);
                });

                // --- Manejo de Pesta√±as ---
                const tabButtons = document.querySelectorAll('.tab-btn');
                const tabContents = document.querySelectorAll('.tab-content');

                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        tabContents.forEach(content => content.classList.remove('active'));

                        const tabId = button.getAttribute('data-tab');
                        button.classList.add('active');
                        document.getElementById(tabId).classList.add('active');
                    });
                });

                // --- Simulaci√≥n de Acciones ---
                document.getElementById('adicionar-btn').addEventListener('click', () => {
                    if (!document.getElementById('adicionar-btn').disabled) {
                        alert(`Procedimiento Adicionar: Iniciando adici√≥n para ${optionsMap[authTypeSelector.value]}.`);
                    }
                });

                document.getElementById('modificar-btn').addEventListener('click', () => {
                    if (!document.getElementById('modificar-btn').disabled) {
                        alert('Procedimiento Modificar: Habilitando la edici√≥n del registro en pantalla.');
                    }
                });

                document.getElementById('anular-btn').addEventListener('click', () => {
                    if (!document.getElementById('anular-btn').disabled) {
                        if (confirm('Advertencia: ¬øEst√° seguro que desea anular la autorizaci√≥n? Una autorizaci√≥n con auditoria concurrente, o con auditoria retrospectiva o reclamada no es posible ser anulada.')) {
                            alert('Procedimiento Anular: Desplegando pantalla auxiliar para credenciales y motivo.');
                        }
                    }
                });
                
                document.getElementById('casos-btn').addEventListener('click', () => {
                     if (!document.getElementById('casos-btn').disabled) {
                        alert('Abriendo pesta√±a o ventana auxiliar para crear/seleccionar Caso.');
                     }
                });

                document.getElementById('excepcion-btn').addEventListener('click', () => {
                    if (!document.getElementById('excepcion-btn').disabled) {
                        alert('Funci√≥n para crear una Excepci√≥n y anular una restricci√≥n generada por el sistema.');
                    }
                });

                document.getElementById('logout-btn').addEventListener('click', () => {
                    localStorage.clear();
                    // Simulamos la redirecci√≥n mostrando la vista de login
                    loginView.style.display = 'flex';
                    mainAppView.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>
